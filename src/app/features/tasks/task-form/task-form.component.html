<div class="task-form">
  <h3>{{ taskToEdit ? "Modifier la tâche" : "Nouvelle tâche" }}</h3>
  <form [formGroup]="form" (ngSubmit)="onSubmit()">
    <div class="form-group">
      <label for="title">Titre</label>
      <input
        type="text"
        id="title"
        formControlName="title"
        [class.is-invalid]="
          form.get('title')?.invalid && form.get('title')?.touched
        "
      />
      <div
        class="invalid-feedback"
        *ngIf="form.get('title')?.invalid && form.get('title')?.touched"
      >
        Le titre est requis
      </div>
    </div>

    <div class="form-group">
      <label for="description">Description</label>
      <textarea
        id="description"
        formControlName="description"
        rows="3"
        [class.is-invalid]="
          form.get('description')?.invalid && form.get('description')?.touched
        "
      ></textarea>
      <div
        class="invalid-feedback"
        *ngIf="
          form.get('description')?.invalid && form.get('description')?.touched
        "
      >
        La description est requise
      </div>
    </div>

    <div class="form-group">
      <label for="dueDate">Date d'échéance</label>
      <input
        type="date"
        id="dueDate"
        formControlName="dueDate"
        [class.is-invalid]="
          form.get('dueDate')?.invalid && form.get('dueDate')?.touched
        "
      />
      <div
        class="invalid-feedback"
        *ngIf="form.get('dueDate')?.invalid && form.get('dueDate')?.touched"
      >
        La date d'échéance est requise
      </div>
    </div>

    <div class="form-group">
      <label class="checkbox-label">
        <input type="checkbox" formControlName="status" />
        Tâche terminée
      </label>
    </div>

    <div class="form-actions">
      <button type="submit" class="btn btn-primary">
        {{ taskToEdit ? "Mettre à jour" : "Créer" }}
      </button>
      <button
        type="button"
        class="btn btn-secondary"
        (click)="onCancel()"
        *ngIf="taskToEdit"
      >
        Annuler
      </button>
    </div>
  </form>
</div>
